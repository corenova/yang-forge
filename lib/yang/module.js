// Generated by CoffeeScript 1.9.1
(function() {
  var StormModel, YangModule, spec,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  StormModel = require('../storm/storm-model');

  spec = require('./yang-core-spec-v1');

  YangModule = (function(superClass) {
    extend(YangModule, superClass);

    YangModule.set({
      yang: 'module'
    });

    YangModule.toYANG = function() {
      var convert;
      convert = function(json, offset) {
        var k, res, v;
        if (offset == null) {
          offset = 0;
        }
        if (!(json instanceof Object)) {
          return json;
        }
        res = '';
        for (k in json) {
          v = json[k];
          if (!(spec.hasOwnProperty((k.split(':'))[0]))) {
            continue;
          }
          res += (Array(offset).join(' ')) + k.replace(':', ' ') + ' ';
          if (!(v instanceof Object)) {
            res += (function() {
              switch (k) {
                case 'contact':
                case 'description':
                case 'reference':
                case 'organization':
                  v = '\n"' + v;
                  v = v.replace(/\n/g, '\n' + Array(offset + 2).join(' '));
                  return v + '";\n\n';
                case 'namespace':
                case 'prefix':
                  return '"' + v + '";\n';
                default:
                  return v + ';\n';
              }
            })();
          } else {
            res += "{\n";
            res += convert(v, offset + 2);
            res += (Array(offset).join(' ')) + "}\n\n";
          }
        }
        return res;
      };
      return convert(this.toJSON('yang', true));
    };

    function YangModule() {
      YangModule.__super__.constructor.apply(this, arguments);
      this._modules = this._models;
      this;
    }

    YangModule.prototype.serialize = function(format) {
      var o, prefix;
      if (format == null) {
        format = 'json';
      }
      o = {};
      prefix = this.constructor.get('name');
      this.everyProperty(function(key) {
        var value;
        value = this.serialize();
        if (value == null) {
          return;
        }
        return o[prefix + ':' + key] = value;
      });
      return o;
    };

    return YangModule;

  })(StormModel);

  module.exports = YangModule;

}).call(this);
